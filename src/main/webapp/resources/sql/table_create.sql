-- 테이블 드랍 (기존 데이터 삭제 원하지 않을 시 한번에 쿼리 실행하지 말것)
DROP TABLE MEMBER;
DROP TABLE TRANER;
DROP TABLE NOTICE_BOARD;
DROP TABLE FREE_BOARD;

-- 회원 데이터 테이블 생성
CREATE TABLE MEMBER(
    MEMBER_IDX NUMBER(4) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,    
    LOGIN_ID VARCHAR2(255) NOT NULL UNIQUE,
    LOGIN_PW VARCHAR2(255) NOT NULL,
    NAME VARCHAR2 (255),
    REGIST_DATE DATE NOT NULL,
    POST_CODE VARCHAR2(255) NOT NULL,
    ADDR VARCHAR2(255) NOT NULL,
    ADDR_DETAIL VARCHAR2(255) NOT NULL,
    EMAIL VARCHAR2 (255),
    NOTE VARCHAR2 (255),
    PHONE VARCHAR2 (255)
);

-- 트레이너 데이터 테이블 생성
CREATE TABLE TRAINER(
    TRAINER_IDX NUMBER(4) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    MEMBER_IDX NUMBER(4),
    CONSTRAINT MEMBER_KEY FOREIGN KEY(MEMBER_IDX) REFERENCES MEMBER(MEMBER_IDX)
);

-- 공지사항 테이블
CREATE TABLE NOTICE_BOARD(
    NOTICE_IDX NUMBER(5) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,      
    TITLE VARCHAR2(255),           
    CONTENT CLOB,    
    REGIST_DATE TIMESTAMP DEFAULT SYSTIMESTAMP,
    VIEWS NUMBER(5),
    MEMBER_IDX NUMBER(4) REFERENCES MEMBER(MEMBER_IDX)    
);

-- 자유게시판 테이블
CREATE TABLE FREEBOARD(
    IDX NUMBER(5) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TITLE VARCHAR2 (255),
    CONTENT CLOB,
    REGIST_DATE TIMESTAMP DEFAULT SYSTIMESTAMP,
    VIEWS NUMBER(5),
    MEMBER_IDX NUMBER(4) REFERENCES MEMBER(MEMBER_IDX)
);

-- 자유게시판 댓글 데이터 테이블

CREATE TABLE FREEBOARD_COMMENT(
    COMMENT_IDX NUMBER(5) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    CONTENT VARCHAR2(2000),
    REGIST_DATE TIMESTAMP DEFAULT SYSTIMESTAMP,
    MEMBER_IDX NUMBER(4) REFERENCES MEMBER(MEMBER_IDX),
    IDX NUMBER(5) REFERENCES FREEBOARD(IDX)
);

-- 추가할 수업(일정 등) 데이터 테이블
CREATE TABLE ATTRACTION(
    ATTR_IDX NUMBER(4) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TITLE VARCHAR2(50) NOT NULL,
    CONTENT VARCHAR2(255) NOT NULL, 
    TRAINER_IDX NUMBER(4),
    PROG_TIME TIMESTAMP NOT NULL,
    END_TIME TIMESTAMP NOT NULL,
    PERIOD NUMBER(1) NOT NULL,
    CONSTRAINT TRAINER_KEY FOREIGN KEY (TRAINER_IDX) REFERENCES TRAINER(TRAINER_IDX)    
);

-- 채용정보 게시판 데이터 테이블
CREATE TABLE RECRUIT_BOARD (
    ID NUMBER(5) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TITLE VARCHAR2(255) NOT NULL,
    CONTENT VARCHAR2(255) NOT NULL,
    WRITER VARCHAR2(50) NOT NULL,
    REGIST_DATE DATE DEFAULT SYSDATE,
    views NUMBER(5) NOT NULL
);
